extends ../../layouts/default.pug

block main
  .add-document-container
    .add-document-wrapper
      .form-card
        .form-header
          h2.form-title Chỉnh sửa tài liệu
          a.btn-back(href="/admin/document")
            i.fas.fa-arrow-left
            span Quay lại

        .form-content
          form.document-form(action="#" method="POST" enctype="multipart/form-data" data-id=document.DocumentID)
            // Tiêu đề
            .form-group
              label.form-label(for="title") Tiêu đề
              input.form-input(
                type="text"
                id="title"
                name="title"
                value=document.Title
                placeholder="Nhập tiêu đề tài liệu"
                required
              )

            // Danh mục
            .form-group
              label(for="category") Danh mục
              .category-select-wrapper
                select#category.form-control.multiple-select(
                  name="category[]"
                  multiple
                  size="4"
                  required
                )
                  each cat in categories
                    option(
                      value=cat.CategoryID
                      selected=document.Categories.includes(cat.CategoryID)
                    )= cat.Name
                .select-hint
                  small.text-muted Giữ Ctrl + Click để chọn nhiều danh mục

            // Link
            .form-group
              label.form-label(for="link") Link
              input.form-input(
                type="url"
                id="link"
                name="link"
                value=document.FilePath
                placeholder="https://example.com"
              )

            // Attach Image và Action buttons
            .form-footer
              .image-section
                label.image-label Ảnh đại diện (1/1)
                
                .image-actions-wrapper
                  .image-grid
                    // Preview container
                    #preview-container.image-preview-container
                      if document.Thumbnail
                        .preview-item
                          img.preview-image(src=document.Thumbnail alt="Current thumbnail")
                    
                    // Upload button
                    label.upload-area(for="image-upload")
                      .upload-content
                        svg.upload-icon(fill="none" stroke="currentColor" viewBox="0 0 24 24")
                          path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12")
                        span.upload-text Upload
                      input#image-upload.file-input(
                        type="file"
                        accept="image/*"
                        name="thumbnail"
                      )

                    // Action buttons
                    .form-actions
                      a.btn-cancel(href="/admin/document") Hủy
                      button.btn-submit(type="submit" data-redirect="/admin/document") 
                        i.fas.fa-save
                        span Cập nhật
  script(src="/admin/js/scriptN.js")                      
                        