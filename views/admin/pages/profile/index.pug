extends ../../layouts/default.pug

block main
    .profile-container
        .row
            .col-md-4.mb-4
                .profile-card
                    .profile-header
                        .avatar-container
                            img.profile-avatar(src="https://th.bing.com/th/id/OIP.GqGVPkLpUlSo5SmeDogUdwHaHa?rs=1&pid=ImgDetMain" alt="Avatar" id="current-avatar")
                            .avatar-edit
                                label(for="avatar-upload")
                                    i.fas.fa-pencil-alt
                                input#avatar-upload(type="file" accept="image/*" hidden)
                        .admin-name-title= profile.fullName
                        .admin-role= profile.role

                    .profile-tabs
                        .profile-tab.active Thông Tin Cá Nhân

            .col-md-8
                .content-card
                    h2.section-title Thông Tin Cá Nhân
                    .notification-area#notificationArea

                    form.profile-form#basicInfoForm
                        .form-section
                            h3.form-section-title Thông tin cơ bản
                            .form-group
                                label(for="fullName") Họ và tên:
                                input#fullName.form-control(type="text" name="fullName" value=profile.fullName required)

                            .form-group
                                label(for="gender") Giới tính:
                                select#gender.form-control(name="gender" style="padding:0px 16px;")
                                    option(value="" selected=!profile.gender) Chọn giới tính
                                    option(value="Nam" selected=profile.gender==="Nam") Nam
                                    option(value="Nữ" selected=profile.gender==="Nữ") Nữ
                                    option(value="Khác" selected=profile.gender==="Khác") Khác

                            .form-group
                                label(for="phone") SĐT:
                                input#phone.form-control(type="text" name="phone" value=profile.phone placeholder="Nhập số điện thoại")

                            .form-group
                                button.btn-save(type="submit") 
                                    i.fas.fa-save
                                    span Lưu thông tin

                    form.profile-form.mt-5#passwordForm
                        .form-section
                            h3.form-section-title 
                                i.fas.fa-shield-alt
                                span Đổi mật khẩu

                            .form-group
                                label(for="email") Email
                                input#email.form-control(type="email" value=profile.email, readonly)

                            //- ✅ THÊM: Ô nhập mật khẩu hiện tại
                            .form-group
                                label(for="currentPassword") 
                                    i.fas.fa-key
                                    span Mật khẩu hiện tại:
                                    span.required *
                                input#currentPassword.form-control(
                                    type="password" 
                                    name="currentPassword" 
                                    required 
                                    placeholder="Nhập mật khẩu hiện tại để xác thực"
                                    autocomplete="current-password"
                                )
                                small.form-text.text-muted Vui lòng nhập mật khẩu hiện tại để xác nhận danh tính

                            .form-group
                                label(for="newPassword") 
                                    i.fas.fa-lock
                                    span Mật khẩu mới:
                                    span.required *
                                input#newPassword.form-control(
                                    type="password" 
                                    name="newPassword" 
                                    required 
                                    minlength="6" 
                                    placeholder="Nhập mật khẩu mới (tối thiểu 6 ký tự)"
                                    autocomplete="new-password"
                                )

                            .form-group
                                label(for="confirmPassword") 
                                    i.fas.fa-lock
                                    span Xác nhận mật khẩu mới:
                                    span.required *
                                input#confirmPassword.form-control(
                                    type="password" 
                                    name="confirmPassword" 
                                    required 
                                    minlength="6" 
                                    placeholder="Nhập lại mật khẩu mới"
                                    autocomplete="new-password"
                                )

                            .password-strength-indicator#passwordStrengthIndicator(style="display: none;")
                                .strength-bar
                                    .strength-fill
                                .strength-text Độ mạnh mật khẩu: 
                                    span.strength-level Yếu

                            .form-group
                                button.btn-save(type="submit") 
                                    i.fas.fa-shield-alt
                                    span Đổi mật khẩu

    script(src="/admin/js/scriptK.js")