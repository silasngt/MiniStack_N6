extends ../../layouts/defaultMenu.pug

block main
    .search-results-container
        .search-header
            h1.search-title Kết quả tìm kiếm
            .search-info
                span.search-query "#{searchQuery}"
                span.search-count #{searchResults.length} kết quả

        .search-results-list
            each result in searchResults
                .search-result-item
                    .result-left
                        .stats-box
                            .stat-item
                                .stat-number #{result.answers}
                                .stat-label answer
                            .stat-item
                                .stat-number #{result.views}
                                .stat-label view
                    .result-right
                        .result-header
                            h3.result-title
                                a(href=`/forum-topic/${result.id}`) #{result.title}
                        .result-content
                            p #{result.content}

        .pagination-container
            if totalPages > 1
                nav.pagination-nav
                    ul.pagination
                        li.page-item(class=currentPage === 1 ? 'disabled' : '')
                            a.page-link(href=`/search?q=${searchQuery}&page=${currentPage - 1}`) Trang trước

                        - for(let i = 1; i <= totalPages; i++)
                            li.page-item(class=i === currentPage ? 'active' : '')
                                a.page-link(href=`/search?q=${searchQuery}&page=${i}`) #{i}

                        li.page-item(class=currentPage === totalPages ? 'disabled' : '')
                            a.page-link(href=`/search?q=${searchQuery}&page=${currentPage + 1}`) Trang sau

        if searchResults.length === 0
            .no-results
                i.fas.fa-search.no-results-icon
                h2 Không tìm thấy kết quả nào
                p Vui lòng thử lại với từ khóa khác hoặc kiểm tra chính tả